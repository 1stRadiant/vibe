<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Web Builder</title>
    <!-- Bootstrap for styling and icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        /* Basic layout and theme styles */
        :root {
            --bg-color: #282c34;
            --sidebar-color: #21252b;
            --text-color: #abb2bf;
            --border-color: #3e4451;
            --primary-color: #61afef;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            overflow: hidden; /* Prevent body scrolling */
        }
        #main-app-container {
            display: none; /* Hidden until login */
            height: 100vh;
            width: 100vw;
        }
        .main-layout {
            display: grid;
            grid-template-columns: auto 1fr;
            grid-template-rows: 100vh;
            height: 100%;
        }
        .sidebar {
            background-color: var(--sidebar-color);
            padding: 1rem;
            width: 280px;
        }
        .main-content {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        .tab-bar {
            display: flex;
            background-color: var(--sidebar-color);
            border-bottom: 1px solid var(--border-color);
        }
        .tab-button {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-color);
            border-bottom: 2px solid transparent;
        }
        .tab-button.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        .tab-content-area {
            flex-grow: 1;
            position: relative;
        }
        .tab-content {
            display: none;
            height: 100%;
            width: 100%;
            overflow: auto;
        }
        .tab-content.active {
            display: block;
        }
        #website-preview, #node-canvas-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background-color: #fff;
        }
        #canvas {
             background-color: #0a0e27;
        }
        /* Auth Modal */
        #auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .auth-box {
            background: var(--bg-color);
            padding: 2rem;
            border-radius: 8px;
            width: 100%;
            max-width: 400px;
            border: 1px solid var(--border-color);
        }
        /* Add other placeholder styles for your elements here */
        textarea {
            width: 100%;
            background-color: var(--sidebar-color);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 0.5rem;
        }
        .loading-spinner {
            border: 2px solid #f3f3f3; 
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Authentication Modal -->
    <div id="auth-modal">
        <div class="auth-box">
            <h2 id="auth-title">Login</h2>
            <p id="auth-error" class="text-danger"></p>
            <form id="login-form">
                <div class="mb-3">
                    <input type="text" id="login-username" class="form-control" placeholder="Username" required>
                </div>
                <div class="mb-3">
                    <input type="password" id="login-password" class="form-control" placeholder="Password" required>
                </div>
                <button type="button" id="login-button" class="btn btn-primary w-100">Login</button>
            </form>
            <form id="signup-form" style="display: none;">
                <div class="mb-3">
                    <input type="text" id="signup-username" class="form-control" placeholder="Choose a Username" required>
                </div>
                <div class="mb-3">
                    <input type="password" id="signup-password" class="form-control" placeholder="Choose a Password" required>
                </div>
                <button type="button" id="signup-button" class="btn btn-primary w-100">Sign Up</button>
            </form>
            <div class="text-center mt-3">
                <a href="#" id="show-signup">Don't have an account? Sign Up</a>
                <a href="#" id="show-login" style="display: none;">Already have an account? Login</a>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="main-app-container">
        <div class="main-layout">
            <!-- Sidebar (Dummy) -->
            <div class="sidebar">
                <h4>Vibe Builder</h4>
                <hr>
                <div class="dropdown">
                    <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                        <strong class="d-none d-sm-inline mx-1">User</strong>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
                        <li><a class="dropdown-item" href="#" id="logout-button">Sign out</a></li>
                    </ul>
                </div>
                 <!-- All the other sidebar elements like project list, modals etc. would go here -->
                 <!-- For this example, we keep it simple -->
            </div>
            
            <!-- Main Content Area -->
            <div class="main-content">
                <div class="tab-bar">
                    <button class="tab-button active" data-tab="preview"><i class="bi bi-display"></i> Preview</button>
                    <button class="tab-button" data-tab="editor"><i class="bi bi-braces"></i> Editor</button>
                    <button class="tab-button" data-tab="canvas"><i class="bi bi-diagram-3"></i> Canvas</button>
                    <!-- Add other tab buttons here as needed -->
                </div>
                <div class="tab-content-area">
                    <div id="preview" class="tab-content active">
                        <iframe id="website-preview"></iframe>
                    </div>
                    <div id="editor" class="tab-content">
                        <div id="vibe-editor" style="padding: 1rem;"></div>
                    </div>
                    <div id="canvas" class="tab-content">
                        <iframe id="node-canvas-iframe" src="vibe-node-canvas.html"></iframe>
                    </div>
                    <!-- Add other tab content divs here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- All other modals and hidden elements required by the script -->
    <div id="edit-node-modal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background: #333; padding: 20px; border-radius: 5px; z-index:100;">
        <input id="edit-node-id" type="hidden">
        <input id="edit-node-type" type="hidden">
        Description: <textarea id="edit-node-description"></textarea><br>
        Code: <textarea id="edit-node-code" rows="10"></textarea><br>
        <button id="save-edit-node-button">Save</button>
        <button id="close-edit-node-modal-button">Close</button>
        <p id="edit-node-error" class="text-danger"></p>
        <!-- Dummy elements to prevent errors -->
        <button id="ai-improve-description-button">AI Improve</button>
        <button id="save-as-component-button">Save as Component</button>
    </div>
    
    <!-- Dummy elements to prevent "Cannot read properties of null" errors -->
    <div style="display:none;">
        <button id="toggle-inspect-button"></button> <button id="undo-button"></button> <button id="redo-button"></button> <button id="share-project-button"></button> <button id="manual-save-button"></button> <div id="start"></div> <input id="project-prompt-input"> <button id="generate-project-button"></button> <div id="start-page-generation-output"></div> <div id="generation-status-text"></div> <div id="live-code-output"></div> <input id="new-project-id-input"> <div id="project-list"></div> <div id="no-projects-message"></div> <div id="new-project-container"></div> <button id="start-iterative-build-button"></button> <textarea id="full-code-editor"></textarea> <button id="update-tree-from-code-button"></button> <input id="search-input"> <button id="find-next-button"></button> <button id="find-prev-button"></button> <div id="search-results-count"></div> <input id="ai-editor-search-input"> <button id="ai-editor-search-button"></button> <input type="file" id="html-file-input"> <button id="upload-html-button"></button> <input type="file" id="zip-file-input"> <button id="upload-zip-button"></button> <button id="download-zip-button"></button> <select id="ai-provider-select"></select> <div id="gemini-settings-container"></div> <select id="gemini-model-select"></select> <div id="gemini-api-key-container"></div> <div id="nscale-api-key-container"></div> <input id="api-key-input"> <button id="save-api-key-button"></button> <div id="api-key-status"></div> <input id="nscale-api-key-input"> <button id="save-nscale-api-key-button"></button> <div id="nscale-api-key-status"></div> <textarea id="agent-prompt-input"></textarea> <button id="run-agent-single-task-button"></button> <button id="start-iterative-session-button"></button> <div id="agent-output"></div> <div id="iterative-session-ui"></div> <div id="iterative-plan-display"></div> <div id="iterative-controls"></div> <button id="accept-continue-button"></button> <button id="request-changes-button"></button> <button id="end-session-button"></button> <textarea id="chat-system-prompt-input"></textarea> <div id="chat-output"></div> <textarea id="chat-prompt-input"></textarea> <button id="send-chat-button"></button> <button id="generate-flowchart-button"></button> <div id="flowchart-output"></div> <div id="console-error-indicator"></div> <button id="new-project-button"></button> <div id="files-tree"></div> <div id="files-preview"></div> <input type="file" id="files-upload-input"> <button id="files-upload-button"></button> <button id="files-new-folder-button"></button> <button id="files-new-file-button"></button> <button id="files-download-button"></button> <button id="files-copy-button"></button> <button id="files-paste-button"></button> <button id="files-rename-button"></button> <button id="files-delete-button"></button> <div id="global-agent-loader"></div> <div id="global-agent-status-text"></div> <div id="global-agent-progress-text"></div> <div id="context-component-list"></div> <button id="add-new-component-button"></button> <div id="context-component-viewer"></div> <button id="download-context-button"></button> <button id="upload-context-button"></button> <input type="file" id="context-upload-input"> <div id="context-component-modal"></div> <button id="close-context-modal-button"></button> <button id="save-component-button"></button> <button id="delete-component-button"></button> <input id="component-id-input"> <input id="component-name-input"> <textarea id="component-description-input"></textarea> <textarea id="component-html-input"></textarea> <textarea id="component-css-input"></textarea> <textarea id="component-js-input"></textarea> <div id="component-modal-error"></div> <div id="component-modal-title"></div> <input id="component-ai-prompt-input"> <button id="generate-component-button"></button> <div id="settings-modal"></div> <button id="close-settings-modal-button"></button> <button id="start-page-settings-button"></button> <button id="open-settings-modal-button"></button> <div id="add-node-modal"></div> <button class="close-button"></button> <button id="create-node-button"></button> <input id="add-node-parent-id"> <input id="new-node-id"> <textarea id="new-node-description"></textarea> <select id="new-node-type"></select> <div id="add-node-error"></div> <input id="add-node-target-id"> <input id="add-node-position"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- THIS IS THE LINE YOU WERE LOOKING FOR -->
    <script src="app.js" type="module"></script>
</body>
</html>